@page "/"
@using System.ComponentModel.DataAnnotations
@inject ILogger<Login> Logger
@inject NavigationManager Navigation


<EditForm Model="@loginModel" OnValidSubmit="HandleLogin">
    <DataAnnotationsValidator />
    <ValidationSummary />


    <div class="login-container">
        <div class="login-form">
            <div class="login-header">
                <i class="fas fa-user-circle fa-3x"></i>
                <h2>LOGIN</h2>
                <p>Ingrese sus credenciales</p>
            </div>

            <label>Usuario</label>
            <div class="input-group">
                <i class="fas fa-user"></i>
                <InputText @bind-Value="loginModel.Usuario" class="form-input" placeholder="Ingrese su usuario" autocomplete="username" />
            </div>


            <label>Contraseña</label>
            <div class="input-group">
                <i class="fas fa-lock"></i>
                <InputText @bind-Value="loginModel.Contrasena" class="form-input" placeholder="Ingrese su contraseña" type="password" autocomplete="current-password" />
            </div>

            <button class="btn-login" type="submit">
                <i class="fas fa-sign-in-alt"></i> Ingresar

            </button>

            <div class="login-links">
                <a href="#">¿Olvidó su contraseña?</a><br />
                <span>¿No tiene una cuenta? <a href="#">Regístrese aquí</a></span><br />
                <a href="#">Continuar</a>
            </div>
        </div>
    </div>
</EditForm>

@code {
    private LoginModel loginModel = new();

    private async Task HandleLogin()
    {
        Logger.LogInformation("Intentando login con usuario: {Usuario}", loginModel.Usuario);
        Navigation.NavigateTo("/inicio");

        // Aquí deberías llamar a tu servicio de autenticación via HttpClient
        // Ejemplo:
        // var response = await Http.PostAsJsonAsync("api/auth/login", loginModel);

    }

    public class LoginModel
    {
        [Required(ErrorMessage = "El usuario es obligatorio.")]
        public string? Usuario { get; set; }

        [Required(ErrorMessage = "La contraseña es obligatoria.")]
        public string? Contrasena { get; set; }
    }
}