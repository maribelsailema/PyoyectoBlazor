@page "/inicio-admin"
@using System.Net.Http.Json
@using Proyecto.Backend.Domain.Entities.Models
@using Proyecto.Shared.Models
@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject HttpClient Http

<header class="navbar">
    <div class="navbar-left">
        <h3>Bienvenido, @usuario.NombreCompleto (Administrador)</h3>
    </div>
    <nav class="navbar-right nav-links">
        <NavLink href="/inicio-admin" class="nav-item">
            <i class="bi bi-house-fill"></i> Inicio
        </NavLink>
        <NavLink href="/adminPostulaciones" class="nav-item">
            <i class="bi bi-clipboard-check-fill"></i> Ver Postulantes
        </NavLink>

        <NavLink href="/reportes-admin" class="nav-item">
            <i class="bi bi-bar-chart-line-fill"></i> Reportes
        </NavLink>
        <NavLink href="/" class="nav-item cerrar-sesion">
            <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
        </NavLink>
    </nav>
</header>

<main class="contenido">
    <section class="bienvenida">
        <h2>Panel de Administración del Sistema de Promoción FISEI</h2>
        <p>Seleccione una opción para gestionar procesos, verificar requisitos o administrar la base de datos.</p>

    </section>
</main>

<footer class="footer">
    <div class="footer-info">
        <div class="footer-section">
            <h4><i class="bi bi-info-circle-fill"></i> Acerca del Sistema</h4>
            <p>Módulo administrativo del Sistema de Promoción Docente FISEI.</p>
        </div>
        <div class="footer-section">
            <h4><i class="bi bi-envelope-fill"></i> Soporte Técnico</h4>
            <p>admin@fisei.edu.ec<br>+593 98 765 4321</p>
        </div>
        <div class="footer-section">
            <h4><i class="bi bi-link-45deg"></i> Accesos Rápidos</h4>
            <NavLink href="/verificar"><i class="bi bi-clipboard-check-fill"></i> Verificación</NavLink><br />
            <NavLink href="/reportes-admin"><i class="bi bi-bar-chart-line-fill"></i> Reportes</NavLink><br />

        </div>
    </div>
    <p class="copyright">© 2025 Sistema de Promoción, Todos los Derechos Reservados</p>
</footer>

@code {
    private UsuarioModel usuario = new();

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var cedula = await localStorage.GetItemAsync<string>("cedulaUsuario");

            if (!string.IsNullOrWhiteSpace(cedula))
            {
                var response = await Http.GetFromJsonAsync<UsuarioModel>($"api/Usuario/porCedula/{cedula}");
                if (response != null)
                    usuario = response;
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error cargando datos del usuario: {ex.Message}");
        }
    }


}
